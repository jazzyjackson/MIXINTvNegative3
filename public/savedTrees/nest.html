<head>
    <!--<link href="https://fonts.googleapis.com/css?family=VT323" rel="stylesheet">-->
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="/styles/menustyle.css">
    <script src="/js/constructors/Leaf.js" defer=""></script>
    <script src="/js/constructors/Terminal.js" defer=""></script>
    <script src="/js/socket.io.js" defer=""></script>
    <script src="/js/socketevents.js" defer=""></script>
    <script src="/js/customCommands.js" defer=""></script>
    <script src="/js/utils.js" defer=""></script>
    
    
  <script src="/js/constructors/Codemirror.js" defer="true"></script><link rel="stylesheet" href="/codemirrorlib/codemirror.css"><script src="/codemirrorlib/codemirror.js" defer="true"></script><script src="/codemirrormode/meta.js" defer="true"></script><script src="/codemirrormode/javascript/javascript.js" defer="true"></script><script id="repl">var nested = Array.from(new Array(5), (outerEach, outerIndex) => 
	outerEach = Array.from(new Array(10), (innerEach, innerIndex) => 
    	innerEach = outerIndex * innerIndex
    )
)</script><script id="loadscript">
      let scriptArray = Array.from(document.getElementsByTagName('script'));
      let loadingArray = [];
      let firstTerminalIcanFind;
      
      scriptArray.forEach(scriptNode => {
        // console.log(scriptNode)
        let src = scriptNode.getAttribute('src');
        if(src){
          let loadingDiv = document.createElement('div');
          loadingDiv.className = 'result'
          loadingDiv.textContent = `Loading ${src}... `
          loadingArray.push(loadingDiv)
          scriptNode.addEventListener('load', () => {
            loadingDiv.textContent += ' done.'
            console.log('done with ',src)
          })
        }
      })
      document.addEventListener('readystatechange', () => {
        console.log('readyStateChange')
        switch(document.readyState){
          case 'interactive': 
            firstTerminalIcanFind = document.querySelector('.terminalContainer');
            loadingArray.forEach(divNode => {
              firstTerminalIcanFind.appendChild(divNode)
            });
            let aPotentialName = location.pathname;
            aPotentialName = aPotentialName.match(/\/\w+\.|\/\w+$/);
            aPotentialName = aPotentialName && aPotentialName[0].match(/\w+/);
            aPotentialName = aPotentialName && aPotentialName[0];
            let potentialTerminal = document.getElementById("root0");
            //if the document has a name AND there is NOT already a terminal with that name
            if(aPotentialName && potentialTerminal){
              potentialTerminal.id = aPotentialName;
              let thisHeader = potentialTerminal.querySelector('.entityHeader')
              let thisTitle = thisHeader.querySelector('.headerTitle')
              thisTitle.textContent = aPotentialName;
              potentialTerminal.setAttribute('protoPrompt', 'localhost/' + aPotentialName);
              Array.from(potentialTerminal.getElementsByClassName('promptContainer'), function(node){
                node.firstChild.innerHTML = `localhost/${aPotentialName}<span class="arrow"></span>`;
              })
            }
            break;
          case 'complete':
            let readyDiv = document.createElement('div')
            readyDiv.className = 'result'
            readyDiv.textContent = 'OK Ready.'
            readyDiv.style.textAlign = 'right'
            firstTerminalIcanFind.appendChild(readyDiv)
            initPrompt(firstTerminalIcanFind);
            break;
        }
      })
      window.addEventListener('load', () => {
        
      })
      let scriptReArranger = new MutationObserver((info,thisMute)=>{
        console.log("something has changed!", info)
        thisMute.disconnect();
        // mvoeThisScript();
        let thisScript = document.getElementById("loadscript");
        thisScript.remove();
        document.head.appendChild(thisScript)
        thisMute.observe(document.head, {childList: true})
        //this gets caught in an infinite loop.
      })
      scriptReArranger.observe(document.head, {childList: true})
      // function moveThisScript(){
      //   let thisScript = document.getElementById("loadscript");
      //   thisScript.remove();
      //   document.head.appendChild(thisScript)
      // }

    </script></head>
  <!--Giving body id body for consistency with certain functions that rely on div id-->
  <body id="body" style="position: absolute; left: -1px; top: 0px; height: 739px; width: 1422px;">
    
  

<div showmenu="false" broadcast="true" listen="true" style="left: 314px; top: 53px; width: 800px; height: 400px; position: absolute; background: white;" tabindex="1" class="leaf codemirrorContainer           " id="Codemirror0"><div class="entityHeader">
    <table>
      <tbody><tr>
        <td class="headerTitle">Codemirror0</td>
      </tr>
    </tbody></table>
    <div class="menuButton"></div>
    <div class="removeButton"></div>
    <div class="menu">
      <ul>
        <li tabindex="2"> Edit <div class="editButton"></div></li>
        <li tabindex="2"> Broadcast <div class="broadcastButton"></div> </li>
        <li tabindex="2"> Listen <div class="listenButton"></div> </li>
        <li tabindex="2"> Save <div class="saveButton"></div> </li>
      </ul>
    </div>
  </div><textarea style="display: none;">var nested = Array.from(new Array(5), (outerEach, outerIndex) =&gt; 
	outerEach = Array.from(new Array(10), (innerEach, innerIndex) =&gt; 
    	innerEach = outerIndex * innerIndex
    )
)</textarea></div><div showmenu="false" broadcast="true" listen="true" style="left: 6px; top: 51px; width: 300px; height: 300px; position: absolute; background: white;" tabindex="1" class="leaf terminal" id="nest" history="0" protoprompt="localhost/nest"><div class="entityHeader">
    <table>
      <tbody><tr>
        <td class="headerTitle">nest</td>
      </tr>
    </tbody></table>
    <div class="menuButton"></div>
    <div class="removeButton"></div>
    <div class="menu">
      <ul>
        <li tabindex="2"> Edit <div class="editButton"></div></li>
        <li tabindex="2"> Broadcast <div class="broadcastButton"></div> </li>
        <li tabindex="2"> Listen <div class="listenButton"></div> </li>
        <li tabindex="2"> Save <div class="saveButton"></div> </li>
      </ul>
    </div>
  </div><div class="terminalContainer"><div class="promptContainer"><span class="prompt">localhost/nest<span class="arrow"></span></span><div class="input">nested</div></div><div class="result result" id="1493222878002">0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,0,2,4,6,8,10,12,14,16,18,0,3,6,9,12,15,18,21,24,27,0,4,8,12,16,20,24,28,32,36</div><div class="promptContainer"><span class="prompt">localhost/nest<span class="arrow"></span></span><div class="input">nested.join('\n')</div></div><div class="result result" id="1493222882986">0,0,0,0,0,0,0,0,0,0
0,1,2,3,4,5,6,7,8,9
0,2,4,6,8,10,12,14,16,18
0,3,6,9,12,15,18,21,24,27
0,4,8,12,16,20,24,28,32,36</div><div class="promptContainer"><span class="prompt">localhost/nest<span class="arrow"></span></span><div class="input"></div></div><div class="request" id="nest2" createdat="1493223295961">7.195 KB written successfully to nest.html at Wed Apr 26 2017 12:14:55 GMT-0400 (EDT)</div><div class="promptContainer"><span class="prompt">localhost/nest<span class="arrow"></span></span><div class="input"></div></div></div></div></body>