<head>
    <!--<link href="https://fonts.googleapis.com/css?family=VT323" rel="stylesheet">-->
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="/styles/menustyle.css">
    <script src="/js/constructors/Leaf.js" defer=""></script>
    <script src="/js/constructors/Terminal.js" defer=""></script>
    <script src="/js/socket.io.js" defer=""></script>
    <script src="/js/socketevents.js" defer=""></script>
    <script src="/js/customCommands.js" defer=""></script>
    <script src="/js/utils.js" defer=""></script>
    
    <script id="repl"></script>
  <script src="/js/constructors/Codemirror.js" defer="true"></script><link rel="stylesheet" href="/codemirrorlib/codemirror.css"><script src="/codemirrorlib/codemirror.js" defer="true"></script><title>priorites</title><script id="loadscript">
      let scriptArray = Array.from(document.getElementsByTagName('script'));
      let loadingArray = [];
      let firstTerminalIcanFind;
      
      scriptArray.forEach(scriptNode => {
        // console.log(scriptNode)
        let src = scriptNode.getAttribute('src');
        if(src){
          let loadingDiv = document.createElement('div');
          loadingDiv.className = 'result'
          loadingDiv.textContent = `Loading ${src}... `
          loadingArray.push(loadingDiv)
          scriptNode.addEventListener('load', () => {
            loadingDiv.textContent += ' done.'
            console.log('done with ',src)
          })
        }
      })
      document.addEventListener('readystatechange', () => {
        console.log('readyStateChange')
        switch(document.readyState){
          case 'interactive': 
            firstTerminalIcanFind = document.querySelector('.terminalContainer');
            loadingArray.forEach(divNode => {
              firstTerminalIcanFind.appendChild(divNode)
            });
            let aPotentialName = location.pathname;
            aPotentialName = aPotentialName.match(/\/\w+\.|\/\w+$/);
            aPotentialName = aPotentialName && aPotentialName[0].match(/\w+/);
            aPotentialName = aPotentialName && aPotentialName[0];
            let potentialTerminal = document.getElementById("root0");
            //if the document has a name AND there is NOT already a terminal with that name
            if(aPotentialName && potentialTerminal){
              potentialTerminal.id = aPotentialName;
              let thisHeader = potentialTerminal.querySelector('.entityHeader')
              let thisTitle = thisHeader.querySelector('.headerTitle')
              thisTitle.textContent = aPotentialName;
              potentialTerminal.setAttribute('protoPrompt', 'localhost/' + aPotentialName);
              Array.from(potentialTerminal.getElementsByClassName('promptContainer'), function(node){
                node.firstChild.innerHTML = `localhost/${aPotentialName}<span class="arrow"></span>`;
              })
            }
            break;
          case 'complete':
            let readyDiv = document.createElement('div')
            readyDiv.className = 'result'
            readyDiv.textContent = 'OK Ready.'
            readyDiv.style.textAlign = 'right'
            firstTerminalIcanFind.appendChild(readyDiv)
            initPrompt(firstTerminalIcanFind);
            break;
        }
      })
      window.addEventListener('load', () => {
        
      })
      let scriptReArranger = new MutationObserver((info,thisMute)=>{
        console.log("something has changed!", info)
        thisMute.disconnect();
        // mvoeThisScript();
        let thisScript = document.getElementById("loadscript");
        thisScript.remove();
        document.head.appendChild(thisScript)
        thisMute.observe(document.head, {childList: true})
        //this gets caught in an infinite loop.
      })
      scriptReArranger.observe(document.head, {childList: true})
      // function moveThisScript(){
      //   let thisScript = document.getElementById("loadscript");
      //   thisScript.remove();
      //   document.head.appendChild(thisScript)
      // }

    </script></head>
  <!--Giving body id body for consistency with certain functions that rely on div id-->
  <body id="body" style="position: absolute; left: 0px; top: 0px; height: 830px; width: 1372px;">
    <div showmenu="false" broadcast="true" listen="true" style="left: 150px; top: 150px; width: 400px; height: 300px; position: absolute;background: white" tabindex="1" class="leaf terminal" id="priorites" history="0" protoprompt="localhost/priorites"><div class="entityHeader">
    <table>
      <tbody><tr>
        <td class="headerTitle">priorites</td>
      </tr>
    </tbody></table>
    <div class="menuButton"></div>
    <div class="removeButton"></div>
    <div class="menu">
      <ul>
        <li tabindex="2"> Edit <div class="editButton"></div></li>
        <li tabindex="2"> Broadcast <div class="broadcastButton"></div> </li>
        <li tabindex="2"> Listen <div class="listenButton"></div> </li>
        <li tabindex="2"> Save <div class="saveButton"></div> </li>
      </ul>
    </div>
  </div><div class="terminalContainer"><div class="promptContainer"><span class="prompt">localhost/priorites<span class="arrow"></span></span><div class="input"></div></div><div class="result">Loading /js/constructors/Leaf.js...  done.</div><div class="result">Loading /js/constructors/Terminal.js...  done.</div><div class="result">Loading /js/socket.io.js...  done.</div><div class="result">Loading /js/socketevents.js...  done.</div><div class="result">Loading /js/customCommands.js...  done.</div><div class="result">Loading /js/utils.js...  done.</div><div class="result" style="text-align: right;">OK Ready.</div><div class="promptContainer"><span class="prompt">localhost/priorites<span class="arrow"></span></span><div class="input">create Codemirror</div></div><div class="query result" id="1497494389365">Constructor retrieved and invoked, Codemirror0 added to DOM</div><div class="promptContainer"><span class="prompt">localhost/priorites<span class="arrow"></span></span><div class="input">save</div></div><div class="result" id="priorites2" createdat="1497494431757">7.47 KB written successfully to priorites.html in 365ms</div><div class="promptContainer"><span class="prompt">localhost/priorites<span class="arrow"></span></span><div class="input">create Codemirror</div></div><div class="query result" id="1497496325532">Constructor invoked, Codemirror1 added to DOM</div><div class="promptContainer"><span class="prompt">localhost/priorites<span class="arrow"></span></span><div class="input">save</div></div><div class="result" id="priorites2" createdat="1497496644794">9.43 KB written successfully to priorites.html in 552ms</div><div class="promptContainer"><span class="prompt">localhost/priorites<span class="arrow"></span></span><div class="input">save</div></div><div class="result" id="priorites2" createdat="1497496806961">9.88 KB written successfully to priorites.html in 543ms</div><div class="promptContainer"><span class="prompt">localhost/priorites<span class="arrow"></span></span><div class="input">save</div></div><div class="result" id="priorites2" createdat="1497498045237">11.18 KB written successfully to priorites.html in 70ms</div><div class="promptContainer"><span class="prompt">localhost/priorites<span class="arrow"></span></span><div class="input">save</div></div><div class="request" id="priorites2" createdat="1497498154677">11.517 KB written successfully to priorites.html at Wed Jun 14 2017 23:42:34 GMT-0400 (Eastern Daylight Time)</div><div class="promptContainer"><span class="prompt">localhost/priorites<span class="arrow"></span></span><div class="input"></div></div></div></div>
  

<div showmenu="false" broadcast="true" listen="true" style="left: 567px; top: 147px; width: 800px; height: 400px; position: absolute; background: white;" tabindex="1" class="leaf codemirrorContainer    " id="Codemirror0"><div class="entityHeader">
    <table>
      <tbody><tr>
        <td class="headerTitle">Codemirror0</td>
      </tr>
    </tbody></table>
    <div class="menuButton"></div>
    <div class="removeButton"></div>
    <div class="menu">
      <ul>
        <li tabindex="2">Evaluate<div class="editButton"></div></li>
        <li tabindex="2"> Broadcast <div class="broadcastButton"></div> </li>
        <li tabindex="2"> Listen <div class="listenButton"></div> </li>
        <li tabindex="2"> Save <div class="saveButton"></div> </li>
      </ul>
    </div>
  </div><textarea style="display: none;">So
to get this out there
as an easy to deploy
customizable interpreter, allowing people to chat to one another

You could go back in time in your own conversations

Be making up a story
and rewind

and end up with different timelines

but yeah priority
is making sure you can put files on your server, and are able to dissalow guests to do so.
Allow guests to POST to a function that appends their comment to a data structure
allow guests to PUT to a function that captures their webcame to disk perhaps
but allow root to reprogram it
overwrite files and so on

control what version is being routed to...</textarea></div><div showmenu="false" broadcast="true" listen="true" style="left: 109px; top: 378px; width: 800px; height: 400px; position: absolute; background: white;" tabindex="1" class="leaf codemirrorContainer              " id="Codemirror1"><div class="entityHeader">
    <table>
      <tbody><tr>
        <td class="headerTitle">Codemirror1</td>
      </tr>
    </tbody></table>
    <div class="menuButton"></div>
    <div class="removeButton"></div>
    <div class="menu">
      <ul>
        <li tabindex="2">Evaluate<div class="editButton"></div></li>
        <li tabindex="2"> Broadcast <div class="broadcastButton"></div> </li>
        <li tabindex="2"> Listen <div class="listenButton"></div> </li>
        <li tabindex="2"> Save <div class="saveButton"></div> </li>
      </ul>
    </div>
  </div><textarea style="display: none;">1. create an example dialog to put and auto update from a repo.
	1.1 each username gets their own config file. Guests all deal with one config, groups can login under a subdomain that allows them to update the same config...
    1.2 use config file to render components from editblocks
    	1.2.1 config saves top left location of each element, as well as width height and zindex attributes.
        1.2.2 config contains a graph of objects, each with a class
      		  classname is used to querySelect all and construct components around editblock
        1.9.9 config graph also allows for traversal determining how to stack functions and how to pipe inputs and outputs....
    1.3 use config file to render svg elements as paths
    	1.3.1 probably one tree, inserted before all elements, given z index one (terminal is z-index 0, unless its not)
        	  z-index defines stacking order, stacking order of all elements can be rapidly rearranged.
              each point to point node has an attribute parent -&gt; id, an an attribute child -&gt; id that allows them to be updated with querySelector.
              When moving a node, update its position, but also grab whatever svg has this node as a child and update its end point.
              start x start y end x end y is easily extrapolated into the d path attribute that actually draws the svg
              so this stays pretty close to abstraction. Redraw the svg connecting the parent and child. No layers here.

2. ensure root can execute things that guests cant
	1.5 have a plan for how to handle other groups. root, editors, moderators, guests
    
    
3. allow for localhost API to replicate itself onto a cloud server for globalhost


6. Allow for globalhost to simply introduce git remotes and proxy requests to remotes...

Maybe it doesn't scale

</textarea></div></body>